; generated by Component: ARM Compiler 5.04 update 1 (build 49) Tool: ArmCC [5040049]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\stm32l152-eval\system_stm32l1xx.o --asm_dir=.\STM32L152-EVAL\ --list_dir=.\STM32L152-EVAL\ --depend=.\stm32l152-eval\system_stm32l1xx.d --cpu=Cortex-M3 --apcs=interwork -O3 -I..\inc -I..\..\..\Libraries\CMSIS\Device\ST\STM32L1xx\Include -I..\..\..\Libraries\STM32_USB-FS-Device_Driver\inc -I..\..\..\Libraries\STM32L1xx_StdPeriph_Driver\inc -I..\..\..\Utilities\STM32_EVAL -I..\..\..\Utilities\STM32_EVAL\Common -I..\..\..\Utilities\STM32_EVAL\STM32L152_EVAL -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\PACK\ARM\CMSIS\4.1.1\CMSIS\Include -IC:\Keil\ARM\Inc\ST\STM32L1xx -D__MICROLIB -DSTM32L1XX_MD -DUSE_STDPERIPH_DRIVER -DSTM32L1XX_MD -DUSE_STM32L152_EVAL ..\src\system_stm32l1xx.c]
                          THUMB

                          AREA ||i.SystemCoreClockUpdate||, CODE, READONLY, ALIGN=2

                  SystemCoreClockUpdate PROC
;;;223      */
;;;224    void SystemCoreClockUpdate (void)
000000  491e              LDR      r1,|L1.124|
;;;225    {
000002  b510              PUSH     {r4,lr}
;;;226      uint32_t tmp = 0, pllmul = 0, plldiv = 0, pllsource = 0, msirange = 0;
;;;227    
;;;228      /* Get SYSCLK source -------------------------------------------------------*/
;;;229      tmp = RCC->CFGR & RCC_CFGR_SWS;
000004  6808              LDR      r0,[r1,#0]
;;;230      
;;;231      switch (tmp)
;;;232      {
;;;233        case 0x00:  /* MSI used as system clock */
;;;234          msirange = (RCC->ICSCR & RCC_ICSCR_MSIRANGE) >> 13;
000006  f1a10404          SUB      r4,r1,#4
00000a  f010030c          ANDS     r3,r0,#0xc            ;229
;;;235          SystemCoreClock = (32768 * (1 << (msirange + 1)));
00000e  481c              LDR      r0,|L1.128|
000010  f44f4200          MOV      r2,#0x8000
000014  d005              BEQ      |L1.34|
000016  2b04              CMP      r3,#4                 ;231
000018  d009              BEQ      |L1.46|
00001a  2b08              CMP      r3,#8                 ;231
00001c  d009              BEQ      |L1.50|
00001e  2b0c              CMP      r3,#0xc               ;231
000020  d009              BEQ      |L1.54|
                  |L1.34|
;;;236          break;
;;;237        case 0x04:  /* HSI used as system clock */
;;;238          SystemCoreClock = HSI_VALUE;
;;;239          break;
;;;240        case 0x08:  /* HSE used as system clock */
;;;241          SystemCoreClock = HSE_VALUE;
;;;242          break;
;;;243        case 0x0C:  /* PLL used as system clock */
;;;244          /* Get PLL clock source and multiplication factor ----------------------*/
;;;245          pllmul = RCC->CFGR & RCC_CFGR_PLLMUL;
;;;246          plldiv = RCC->CFGR & RCC_CFGR_PLLDIV;
;;;247          pllmul = PLLMulTable[(pllmul >> 18)];
;;;248          plldiv = (plldiv >> 22) + 1;
;;;249          
;;;250          pllsource = RCC->CFGR & RCC_CFGR_PLLSRC;
;;;251    
;;;252          if (pllsource == 0x00)
;;;253          {
;;;254            /* HSI oscillator clock selected as PLL clock entry */
;;;255            SystemCoreClock = (((HSI_VALUE) * pllmul) / plldiv);
;;;256          }
;;;257          else
;;;258          {
;;;259            /* HSE selected as PLL clock entry */
;;;260            SystemCoreClock = (((HSE_VALUE) * pllmul) / plldiv);
;;;261          }
;;;262          break;
;;;263        default: /* MSI used as system clock */
;;;264          msirange = (RCC->ICSCR & RCC_ICSCR_MSIRANGE) >> 13;
000022  6823              LDR      r3,[r4,#0]
000024  f3c33342          UBFX     r3,r3,#13,#3
000028  1c5b              ADDS     r3,r3,#1
;;;265          SystemCoreClock = (32768 * (1 << (msirange + 1)));
00002a  409a              LSLS     r2,r2,r3
;;;266          break;
00002c  e019              B        |L1.98|
                  |L1.46|
00002e  4a15              LDR      r2,|L1.132|
000030  e017              B        |L1.98|
                  |L1.50|
000032  4a15              LDR      r2,|L1.136|
000034  e015              B        |L1.98|
                  |L1.54|
000036  680a              LDR      r2,[r1,#0]            ;245
000038  680b              LDR      r3,[r1,#0]            ;246
00003a  f4021270          AND      r2,r2,#0x3c0000       ;245
00003e  4c10              LDR      r4,|L1.128|
000040  f4030340          AND      r3,r3,#0xc00000       ;246
000044  1d24              ADDS     r4,r4,#4              ;247
000046  eb044292          ADD      r2,r4,r2,LSR #18      ;247
00004a  7812              LDRB     r2,[r2,#0]            ;247
00004c  2401              MOVS     r4,#1                 ;248
00004e  eb045393          ADD      r3,r4,r3,LSR #22      ;248
000052  680c              LDR      r4,[r1,#0]            ;250
000054  f4143f80          TST      r4,#0x10000           ;250
000058  d00e              BEQ      |L1.120|
00005a  4c0b              LDR      r4,|L1.136|
                  |L1.92|
00005c  4362              MULS     r2,r4,r2              ;255
00005e  fbb2f2f3          UDIV     r2,r2,r3              ;255
                  |L1.98|
;;;267      }
;;;268      /* Compute HCLK clock frequency --------------------------------------------*/
;;;269      /* Get HCLK prescaler */
;;;270      tmp = AHBPrescTable[((RCC->CFGR & RCC_CFGR_HPRE) >> 4)];
000062  6002              STR      r2,[r0,#0]  ; SystemCoreClock
000064  6809              LDR      r1,[r1,#0]
000066  4a06              LDR      r2,|L1.128|
000068  f3c11103          UBFX     r1,r1,#4,#4
00006c  320d              ADDS     r2,r2,#0xd
00006e  5c51              LDRB     r1,[r2,r1]
;;;271      /* HCLK clock frequency */
;;;272      SystemCoreClock >>= tmp;
000070  6802              LDR      r2,[r0,#0]  ; SystemCoreClock
000072  40ca              LSRS     r2,r2,r1
000074  6002              STR      r2,[r0,#0]  ; SystemCoreClock
;;;273    }
000076  bd10              POP      {r4,pc}
                  |L1.120|
000078  4c02              LDR      r4,|L1.132|
00007a  e7ef              B        |L1.92|
;;;274    
                          ENDP

                  |L1.124|
                          DCD      0x40023808
                  |L1.128|
                          DCD      ||.data||
                  |L1.132|
                          DCD      0x00f42400
                  |L1.136|
                          DCD      0x007a1200

                          AREA ||i.SystemInit||, CODE, READONLY, ALIGN=1

                  SystemInit PROC
;;;180      */
;;;181    void SystemInit (void)
000000  4770              BX       lr
;;;182    {
;;;183     
;;;184    }
;;;185    
                          ENDP


                          AREA ||.data||, DATA, ALIGN=2

                  SystemCoreClock
                          DCD      0x01e84800
                  PLLMulTable
000004  03040608          DCB      0x03,0x04,0x06,0x08
000008  0c101820          DCB      0x0c,0x10,0x18,0x20
00000c  30                DCB      0x30
                  AHBPrescTable
00000d  000000            DCB      0x00,0x00,0x00
000010  00000000          DCB      0x00,0x00,0x00,0x00
000014  00010203          DCB      0x00,0x01,0x02,0x03
000018  04060708          DCB      0x04,0x06,0x07,0x08
00001c  09                DCB      0x09

;*** Start embedded assembler ***

#line 1 "..\\src\\system_stm32l1xx.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___18_system_stm32l1xx_c_5d646a67____REV16|
#line 129 "C:\\Keil\\ARM\\PACK\\ARM\\CMSIS\\4.1.1\\CMSIS\\Include\\core_cmInstr.h"
|__asm___18_system_stm32l1xx_c_5d646a67____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___18_system_stm32l1xx_c_5d646a67____REVSH|
#line 144
|__asm___18_system_stm32l1xx_c_5d646a67____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
